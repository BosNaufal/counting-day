/*!
 * Copyright (c) Naufal Rabbani (http://github.com/BosNaufal)
 * Licensed Under MIT (http://opensource.org/licenses/MIT)
 * 
 * CountingDay @ Version 0.0.8
 * 
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CountingDay=e():t.CountingDay=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="../dist/",e(e.s=0)}([function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e){n(this,t),this.MAX_MONTH=12;var a=e.date,o=e.month,i=e.year,u=new Date;if(o=o||u.getMonth()+1,i=i||u.getFullYear(),a<1||a>31||o<1||o>12||"number"!=typeof a||"number"!=typeof o||"number"!=typeof i)throw new Error("[CountingDay]: Invalid constructor argument");return this.state=r({},e,{month:o,year:i}),this.state.day=this.getDate().getDay(),this}return a(t,[{key:"getDate",value:function(){var t=this.state,e=t.date,n=t.month,r=t.year;return new Date(r,n-1,e)}},{key:"convertToTwoDigit",value:function(t){var e=t.toString();return e.length>=2?e:"0"+e}},{key:"getSQLDate",value:function(t,e,n){t=t||this.state.date,e=e||this.state.month,n=n||this.state.year;var r=this.convertToTwoDigit(t);return n+"-"+this.convertToTwoDigit(e)+"-"+r}},{key:"isLeap",value:function(t){return(t=t||this.state.year)%4==0}},{key:"maxDayCount",value:function(t,e){if("string"==typeof t)throw new Error("[CountingDay]: Invalid month index");t=t||this.state.month,e=e||this.state.year;var n=[1,3,5,7,8,10,12],r=[4,6,9,11],a=-1!==n.indexOf(t),o=-1!==r.indexOf(t),i=2===t;return a?31:o?30:!!i&&(this.isLeap(e)?29:28)}},{key:"validArgument",value:function(t,e){if(null===t||isNaN(t)||"number"!=typeof t)throw new Error(e);return!0}},{key:"returnValue",value:function(e,n,r,a){var o=new Date(a,r-1,n),i={day:o.getDay(),date:n,month:r,maxDay:this.maxDayCount(r,a),year:a};return"this"===e?(this.state=i,this):(i.then=function(){return new t(i)},i)}},{key:"addDay",value:function(t,e,n,r){var a=this;this.validArgument(t,"[CountingDay]: Invalid count argument");var o=e||n||r?"object":"this",i=(e||this.state.date)+t,u=n||this.state.month,s=r||this.state.year,h=t<0,f=function(){var t=h?u-1:u,e=a.maxDayCount(t,s);return e||(h?s--:s++,u=h?12:1,a.maxDayCount(u,s))};return function t(){var e=0,n=i>f();return h&&(n=i<=0),n?(h?(e=i+f(),u--):(e=i-f(),u++),i=e,t()):a.returnValue(o,i,u,s)}()}},{key:"addMonth",value:function(t,e,n,r){var a=this,o=this.MAX_MONTH;this.validArgument(t,"[CountingDay]: Invalid count argument");var i=e||n||r?"object":"this",u=t<0,s=e||this.state.date,h=(n||this.state.month)+t,f=r||this.state.year;return function t(){var e=0,n=h>o;return u&&(n=h<=0),n?(u?(e=h+o,f--):(e=h-o,f++),h=e,t()):a.returnValue(i,s,h,f)}()}},{key:"addYear",value:function(t,e,n,r){this.validArgument(t,"[CountingDay]: Invalid count argument");var a=e||n||r?"object":"this",o=e||this.state.date,i=n||this.state.month,u=r||this.state.year+t;return u+=t,this.returnValue(a,o,i,u)}},{key:"get",value:function(){var t=r({},this.state,{month:this.state.month}),e=t.date,n=t.month,a=t.year,o=new Date(a,n-1,e);return r({},t,{day:o.getDay(),date:e,maxDay:this.maxDayCount(n,a)})}}],[{key:"fromDate",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.isPrototypeOf(Date))throw new Error("[CountingDay]: Invalid Date Instance");var a=e.getDay(),o=e.getDate(),i=e.getMonth()+1,u=e.getFullYear();return new t(r({},n,{day:a,date:o,month:i,year:u}))}}]),t}();t.exports=o}])});