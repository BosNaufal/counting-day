/*!
 * Copyright (c) Naufal Rabbani (http://github.com/BosNaufal)
 * Licensed Under MIT (http://opensource.org/licenses/MIT)
 * 
 * CountingDay @ Version 0.0.5
 * 
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CountingDay=e():t.CountingDay=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="../dist/",e(e.s=0)}([function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e){n(this,t),this.MAX_MONTH=12;var a=e.date,o=e.month,i=e.year,u=new Date;if(o=o||u.getMonth()+1,i=i||u.getFullYear(),a<1||a>31||o<1||o>12||"number"!=typeof a||"number"!=typeof o||"number"!=typeof i)throw new Error("[CountingDay]: Invalid constructor argument");return this.state=r({},e,{month:o,year:i}),this.state.day=this.getDate().getDay(),this}return a(t,[{key:"getDate",value:function(){var t=this.state,e=t.date,n=t.month,r=t.year;return new Date(r,n-1,e)}},{key:"convertToTwoDigit",value:function(t){var e=t.toString();return e.length>=2?e:"0"+e}},{key:"getSQLDate",value:function(t,e,n){t=t||this.state.date,e=e||this.state.month,n=n||this.state.year;var r=this.convertToTwoDigit(t);return n+"-"+this.convertToTwoDigit(e)+"-"+r}},{key:"isLeap",value:function(t){return(t=t||this.state.year)%4==0}},{key:"maxDayCount",value:function(t,e){if("string"==typeof t)throw new Error("[CountingDay]: Invalid month index");t=t||this.state.month,e=e||this.state.year;var n=[1,3,5,7,8,10,12],r=[4,6,9,11],a=n.find(function(e){return e===t}),o=r.find(function(e){return e===t}),i=2===t;return a?31:o?30:!!i&&(this.isLeap(e)?29:28)}},{key:"validArgument",value:function(t,e){if(null===t||isNaN(t)||"number"!=typeof t)throw new Error(e);return!0}},{key:"addDay",value:function(t,e,n,a){var o=this;this.validArgument(t,"[CountingDay]: Invalid count argument");var i=e||n||a?"object":"this",u=(e||this.state.date)+t,s=n||this.state.month,f=a||this.state.year,y=t<0,h=function(){var t=y?s-1:s,e=o.maxDayCount(t,f);return e||(y?f--:f++,s=y?12:1,o.maxDayCount(s,f))};return function t(){var e=0,n=u>h();if(y&&(n=u<=0),n)return y?(e=u+h(),s--):(e=u-h(),s++),u=e,t();var a=new Date(f,s-1,u),c={day:a.getDay(),date:u,month:s,maxDay:o.maxDayCount(s,f),year:f,then:o};return"this"===i?(o.state=r({},c),o):c}()}},{key:"addMonth",value:function(t,e,n,a){var o=this,i=this.MAX_MONTH;this.validArgument(t,"[CountingDay]: Invalid count argument");var u=e||n||a?"object":"this",s=t<0,f=e||this.state.date,y=(n||this.state.month)+t,h=a||this.state.year;return function t(){var e=0,n=y>i;if(s&&(n=y<=0),n)return s?(e=y+i,h--):(e=y-i,h++),y=e,t();var a=new Date(h,y-1,f),c={day:a.getDay(),date:f,month:y,maxDay:o.maxDayCount(y,h),year:h,then:o};return"this"===u?(o.state=r({},c),o):c}()}},{key:"get",value:function(){var t=r({},this.state,{month:this.state.month}),e=t.date,n=t.month,a=t.year,o=new Date(a,n-1,e);return r({},t,{day:o.getDay(),date:e,maxDay:this.maxDayCount(n,a)})}}],[{key:"fromDate",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.isPrototypeOf(Date))throw new Error("[CountingDay]: Invalid Date Instance");var a=e.getDay(),o=e.getDate(),i=e.getMonth()+1,u=e.getFullYear();return new t(r({},n,{day:a,date:o,month:i,year:u}))}}]),t}();t.exports=o}])});